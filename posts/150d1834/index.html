<!DOCTYPE html><html lang="zh_CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.0"><link rel="mask-icon" href="/images/logo.svg?v=7.4.0" color="#222"><link rel="stylesheet" href="/css/main.css?v=7.4.0"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",version:"7.4.0",exturl:!1,sidebar:{position:"right",display:"hide",offset:12,onmobile:!0},copycode:{enable:!0,show_result:!0,style:"flat"},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#999",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:-1,unescape:!0,preload:!0},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},translation:{copy_button:"Copy",copy_success:"Copied",copy_failure:"Copy failed"},sidebarPadding:40}</script><meta name="description" content="收集一些不怎么常用的git操作，以做记录"><meta property="og:type" content="article"><meta property="og:title" content="git 操作"><meta property="og:url" content="https://hexo.lilis.xin/posts/150d1834/index.html"><meta property="og:site_name" content="小叽の博客"><meta property="og:description" content="收集一些不怎么常用的git操作，以做记录"><meta property="og:locale" content="zh_CN"><meta property="og:updated_time" content="2019-09-19T09:52:52.005Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="git 操作"><meta name="twitter:description" content="收集一些不怎么常用的git操作，以做记录"><link rel="alternate" href="/atom.xml" title="小叽の博客" type="application/atom+xml"><link rel="canonical" href="https://hexo.lilis.xin/posts/150d1834/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,isPage:!1,isArchive:!1}</script><title>git 操作 | 小叽の博客</title><meta name="generator" content="Hexo 3.9.0"><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh_CN"><div class="container use-motion"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">小叽の博客</span> <span class="logo-line-after"><i></i></span></a></div></div><div class="site-nav-toggle"><button aria-label="Toggle navigation bar"><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archives</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>Categories</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>Tags</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>About</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>Search</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="Searching..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article itemscope itemtype="http://schema.org/Article"><div class="post-block post"><link itemprop="mainEntityOfPage" href="https://hexo.lilis.xin/posts/150d1834/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="小叽"><meta itemprop="description" content=""><meta itemprop="image" content="/images/head.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="小叽の博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">git 操作</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2019-09-11 15:36:04" itemprop="dateCreated datePublished" datetime="2019-09-11T15:36:04+08:00">2019-09-11</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Modified: 2019-09-19 17:52:52" itemprop="dateModified" datetime="2019-09-19T17:52:52+08:00">2019-09-19</time></span></div></header><div class="post-body" itemprop="articleBody"><p>收集一些不怎么常用的<code>git</code>操作，以做记录</p><a id="more"></a><h3 id="git-合并操作"><a class="header-anchor" href="#git-合并操作">➡️</a>git 合并操作</h3><p>通过<code>git log</code>查看提交记录及其commitId<br>再通过<code>git reset --soft commitId</code>来回退版本(–soft 和 --hard的区别就是 --soft是软回退，会将你这次commitId之后的提交全部回退到暂存区中，–hard会将你<br>这次commitId之后的提交全部清除掉)<br>此时你这次commitId之后的提交都会回到暂存区中<br>git commit -m 随便写注释</p><h3 id="git-忽略文件操作"><a class="header-anchor" href="#git-忽略文件操作">➡️</a>git 忽略文件操作</h3><p><code>git</code>忽略文件文件可以用<code>.gitignore</code>文件来实现，但如果一个文件已经被跟踪，再加入<code>.gitignore</code>文件就无效了。<br>这时可以<code>git rm --cached</code>，再更新<code>.gitignore</code>，忽略掉目标文件，最后再提交。<br>使用命令<code>git update-index --assume-unchanged 文件</code>来标记文件，使<code>git</code>停止关注这个需要被忽略的文件，这样也可以达成效果，但是这是一种不合理不规范的做法。<br>原因如下：<br>首先，<code>git update-index</code>的定义是：</p><div class="note primary"><p>Register file contents in the working tree to the index（把工作区下的文件内容注册到索引区）</p></div><p>也就是说<code>update-index</code>针对的是<code>git</code>数据库里被记录的文件，而不是那些需要忽略的文件。<br>接着看关于<code>--assume-unchanged</code>的描述：</p><div class="note primary"><p>When the “assume unchanged” bit is on, Git stops checking the working tree files for possible modifications, so you need to manually unset the bit to tell Git when you change the working tree file. This is sometimes helpful when working with a big project on a filesystem that has very slow lstat(2) system call (e.g. cifs).<br>应用了该标识之后，Git 停止查看工作区文件可能发生的改变，所以你必须 手动 重置该标识以便 Git 知道你想要恢复对文件改变的追踪。当你工作在一个大型项目中，这在文件系统的<code>lstat</code>系统调用非常迟钝的时候会很有用。</p></div><p>也就是说这个命令本身只是一种让<code>git</code>暂时忽略文件变动的操作。<br>主要是在修改一些大型文件时，防止<code>git</code>来回计算文件变化并更新工作区造成卡顿。<br><code>git update-index --assume-unchanged</code>的官方推荐用法是这样的：</p><ol><li>你正在修改一个巨大的文件，你先对其<code>git update-index --assume-unchanged</code>，这样<code>Git</code>暂时不会理睬你对文件做的修改；</li><li>当你的工作告一段落决定可以提交的时候，重置改标识：<code>git update-index --no-assume-unchanged</code>，于是<code>Git</code>只需要做一次更新，这是完全可以接受的了；</li><li>提交推送。</li></ol><p>另外，根据文档的进一步描述：</p><div class="note primary"><p>This option can be also used as a coarse file-level mechanism to ignore uncommitted changes in tracked files (akin to what .gitignore does for untracked files).</p></div><p>也就是说官方并不推荐这种做法，样的事情更应该用<code>.gitignore</code>文件来实现（针对未追踪的文件）。<br>随之而来的新问题是，为什么已经被跟踪的文件<code>.gitignore</code>会失去效果？<br>这是因为我们误解了<code>.gitignore</code>文件的用途，该文件只能作用于<code>Untracked Files</code>，也就是那些从来没有被<code>git</code>记录过的文件（自添加以后，从未 add 及 commit 过的文件）。<br>之所以你的规则不生效，是因为那些文件曾经被<code>git</code>记录过，因此<code>.gitignore</code>对它们完全无效。<br>因此，正确的做法应该先是<code>git rm --cached</code>，再更新<code>.gitignore</code>，忽略掉目标文件，最后再提交。</p><h3 id="git-撤回合并"><a class="header-anchor" href="#git-撤回合并">➡️</a>git 撤回合并</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge --abort</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/posts/3dd74411/" rel="next" title="基于Redis的GeoHash在PHP上的应用"><i class="fa fa-chevron-left"></i> 基于Redis的GeoHash在PHP上的应用</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/posts/ac107f22/" rel="prev" title="git本地仓库和裸仓库">git本地仓库和裸仓库 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div><div class="comments" id="gitalk-container"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#git-合并操作"><span class="nav-number">1.</span> <span class="nav-text">➡️git 合并操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#git-忽略文件操作"><span class="nav-number">2.</span> <span class="nav-text">➡️git 忽略文件操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#git-撤回合并"><span class="nav-number">3.</span> <span class="nav-text">➡️git 撤回合并</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/head.png" alt="小叽"><p class="site-author-name" itemprop="name">小叽</p><div class="site-description" itemprop="description"></div></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">50</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">56</span> <span class="site-state-item-name">tags</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i>RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/l552121229" title="GitHub &rarr; https://github.com/l552121229" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:552121229l@gmail.com" title="E-Mail &rarr; mailto:552121229l@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a></span></div><div class="links-of-blogroll motion-element"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://blog.caoxl.com/" title="https://blog.caoxl.com/" rel="noopener" target="_blank">Keep It Simple And Stupid</a></li></ul></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2020</span> <span class="with-love" id="animate"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">小叽</span></div><div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0</div><span class="post-meta-divider">|</span> <span>&nbsp;<a href="http://www.beian.miit.gov.cn/">粤ICP备18140559号</a>&nbsp;</span><div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.4.0</div></div></footer></div><script src="/lib/anime.min.js?v=3.1.0"></script><script src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script src="/js/utils.js?v=7.4.0"></script><script src="/js/motion.js?v=7.4.0"></script><script src="/js/schemes/muse.js?v=7.4.0"></script><script src="/js/next-boot.js?v=7.4.0"></script><script src="/js/local-search.js?v=7.4.0"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css"><script>NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '03bad61b5e430dca9413',
      clientSecret: 'bd73e83ab1d1764598a44f6324c7842d162372c6',
      repo: 'l552121229.github.io.comments',
      owner: 'l552121229',
      admin: ['l552121229'],
      id: '8951cddee654ec20fb699be1a3006a03',
        language: window.navigator.language || window.navigator.userLanguage,
      
      distractionFreeMode: 'true'
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/z16.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"left","hOffset":0,"vOffset":-20},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false});</script></body></html>